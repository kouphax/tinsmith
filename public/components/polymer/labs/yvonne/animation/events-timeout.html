<!doctype html>
<html>
	<head>
		<script src="../../web-animations-js/web-animations.js"></script>
		<style>
			#target {
				background-color: orange;
				width: 150px;
				height: 150px;
			}
		</style>
	</head>
	<body>
		<x-anim></x-anim>
		<div id="target">
			<button onclick="animateOne()">animate</button>
		</div>
		<div id="result"></div>
		<script>
			function startFn(e) {
				console.log('start', e.target);
			};
			function iterationFn(e) {
				console.log('iteration', e.target);
			};
			function endFn(e) {
				console.log('end', e.target);
			};

			function attachEvents(a) {
				a.onstart = startFn;
				a.oniteration = iterationFn;
				a.onend = endFn;
			};

			function animateOne(delay) {
				var anim = new Animation(target, [
					{transform: 'translate(0,0)'},
					{transform: 'translate(300px,0)'}
				], {duration: 1, startDelay: delay || 0});
				attachEvents(anim);
				setTimeout(function() {
					document.timeline.play(anim);
				});
			};
		</script>
	</body>
</html>
