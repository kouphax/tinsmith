/*!
*  es6-module-loader - v0.2.2 - 8/1/2013
*  https://github.com/ModuleLoader/es6-module-loader
*  Copyright (c) 2013 Guy Bedford, Luke Hoban, Addy Osmani; Licensed MIT
*/
!function(global){!function(){function a(a){var b=function(){};b.prototype=a.global||window,this._builtins=new b;for(var c={},d=["addEventListener","removeEventListener","getComputedStyle","setTimeout","setInterval"],e=0;e<d.length;e++)!function(a){c[a]=function(){return window[a].apply(window,arguments)}}(d[e]);this.defineBuiltins(c),b=function(){},b.prototype=this._builtins,this._global=new b,Object.defineProperty(this._global,"window",{value:this._global}),this._strict=!!a.strict,this.normalize=a.normalize||global.System.normalize,this.resolve=a.resolve||global.System.resolve,this.fetch=a.fetch||global.System.fetch,this.translate=a.translate||global.System.translate,this.link=a.link||global.System.link,this._mios={},this._sloaded={},this._mloads={},this._sloads={}}function b(a){if("object"!=typeof a)throw new TypeError("Expected object");if(a instanceof b)return a;var c=this;for(var d in a)!function(b){Object.defineProperty(c,b,{configurable:!1,enumerable:!0,get:function(){return a[b]}})}(d)}Object.defineProperty(a.prototype,"global",{configurable:!0,enumerable:!0,get:function(){return this._global}}),a.prototype.load=function(a,b,c){var d=this;if(a instanceof Array)for(var e=0,f=0;f<a.length;f++)!function(f){d.load(a[f],function(){e++,e==a.length&&b&&b()},c)}(f);else{if(this._sloaded[a])return b&&b(),void 0;if(this._sloads[a])return this._sloads[a].push({callback:b,errback:c}),void 0;this._sloads[a]=[{callback:b,errback:c}];var g=function(){for(var b=0;b<d._sloads[a].length;b++)d._sloads[a][b].callback&&d._sloads[a][b].callback();delete d._sloads[a]},h=function(b){for(var c=!0,e=0;e<d._sloads[a].length;e++)d._sloads[a][e].errback?d._sloads[a][e].errback(b):c=!1;if(delete d._sloads[a],!c)throw b};this.fetch(a,function(b){var c={address:a,type:"script"};b=d.translate(b,c),d._linkExecute(a,b,c,g,h,!0)},h)}},a.prototype.import=function(a,b,c,d){var e=this;if(a instanceof Array)for(var f=[],g=0,e=this,h=0;h<a.length;h++)!function(d){e.import(a[d],function(c){f[d]=c,g++,g==a.length&&b&&b.apply(null,f)},c)}(h);else{a=this.normalize(a,d);var i={referer:d,metadata:"object"==typeof a?a.metadata:null};if("string"!=typeof a&&(a=a.normalized),this._mios[a])return b&&b(this._mios[a]);if(this._mloads[a])return this._mloads[a].push({callback:b,errback:c}),void 0;this._mloads[a]=[{callback:b,errback:c}];var j=function(b){e._mios[a]=b;for(var c=0;c<e._mloads[a].length;c++)e._mloads[a][c].callback&&e._mloads[a][c].callback(b);delete e._mloads[a]},k=function(b){var c=!0;if(!e._mloads[a])throw b;for(var d=0;d<e._mloads[a].length;d++)e._mloads[a][d].errback?e._mloads[a][d].errback(b):c=!1;if(delete e._mloads[a],!c)throw b},l=this.resolve(a,i);"string"!=typeof l&&(l=l.address),i.normalized=a,this.fetch(l,function(b){i.address=l,i.type="module",b=e.translate(b,i),e._linkExecute(a,b,i,j,k)},k,i)}};var c=0;a.prototype._linkExecute=function(a,d,e,f,g){a||(a="__eval"+c++);var h="script"==e.type,i=this.link(d,e);if(i instanceof b&&!h)return f(i);var k=this;j.loadEsprima(a,d,function(){var c,l;if("object"!=typeof i||h?c=j.parseImports(a,d):(c=i.imports,l=i.execute),!g.called){var m=d,n={};if(l=l||function(){var c;return c=j.parseEval(m,k,{name:a,normalizeMap:n,sourceURL:e.address,isEval:h}),a&&!h?new b(c||{}):void 0},!c.length)return f(l.call(k));for(var o=[],p=0,q=0;q<c.length;q++)!function(b){var d={name:a,address:e.address},h=k.normalize(c[b],d);"object"==typeof h&&(h=h.normalized),n[c[b]]=h,k.import(c[b],function(a){if(p++,o[b]=a,p==c.length)try{var d=l.apply(k,o);f(d)}catch(e){return g(e),void 0}},g,d)}(q)}},g)},a.prototype.eval=function(a){j.parseEval(a,this,{isEval:!0})},a.prototype.evalAsync=function(a,b,c){this._linkExecute(null,a,{type:"script"},b||function(){},c||function(){})},a.prototype.get=function(a){return this._mios[a]||null},a.prototype.set=function(a,c){this._mios[a]=new b(c)},a.prototype.has=function(a){return!!this._mios[a]},a.prototype.delete=function(a){delete this._mios[a]},a.prototype.defineBuiltins=function(a){for(var b in a)a.hasOwnProperty(b)&&(this._builtins[b]=a[b])};var d=/^\/|([^\:\/]*:\/\/)/,e=function(a){return".js"==a.substr(a.length-3,3)||a.match(d)},f=new a({global:window,strict:!1,normalize:function(a,b){if(e(a))return a;var c=b&&b.name;if("./"==a.substr(0,2)){var d=c.split("/");return d.length?(d.pop(),d.push(a.substr(2)),d.join("/")):a.substr(2)}if("../"==a.substr(0,3)){var d=c.split("/");if(!d.length)throw"Path below baseUrl";return d.pop(),this.normalize("./"+a.substr(3),{name:d.join("/")})}return a},resolve:function(a){for(var b in this.ondemandTable)if(-1!=this.ondemandTable[b].indexOf(a))return a;return e(a)?a:this.baseURL+("/"!=this.baseURL.substr(this.baseURL.length-1,1)?"/":"")+a+(".js"==a.substr(a.length-3,3)?"":".js")},fetch:function(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&(200===d.status||0==d.status&&d.responseText?b(d.responseText):c(d.statusText||"XHR error"))},d.open("GET",a,!0),d.send(null)},translate:function(a){return a},link:function(){}});f.baseURL=document.URL.substring(0,window.location.href.lastIndexOf("/")+1),f.ondemandTable={},f.ondemand=function(a){for(var b in a)this.ondemandTable[b]=this.ondemandTable[b]||[],a[b]instanceof Array?this.ondemandTable[b]=this.ondemandTable[b].concat(a[b]):this.ondemandTable[b].push(a[b])};var g=document.getElementsByTagName("script"),h=g[g.length-1],i=h.getAttribute("data-esprima-src")||h.src.substr(0,h.src.lastIndexOf("/")+1)+"esprima-es6.min.js",j={traverse:function(a,b){var c,d;if(b(a)!==!1)for(c in a)d=a[c],"object"==typeof d&&null!==d&&this.traverse(d,b)},importRegEx:/^\s*import\s+./m,exportRegEx:/^\s*export\s+(\{|\*|var|class|function|default)/m,moduleRegEx:/^\s*module\s+("[^"]+"|'[^']+')\s*\{/m,checkModuleSyntax:function(a,b){return(null==a||void 0===this.parseNames[a])&&(this.parseNames[a]=b&&!!(b.match(this.importRegEx)||b.match(this.exportRegEx)||b.match(this.moduleRegEx))),this.parseNames[a]},loadEsprima:function(a,b,c){if(this.esprima)return c();if(!this.polyfills.length&&!this.checkModuleSyntax(a,b))return c();var d=this;System.load(i,function(){d.esprima=System.global.esprima,c()})},parseNames:{},treeCache:{},parseImports:function(a,b){if(!this.checkModuleSyntax(a,b))return[];try{var c=this.treeCache[a]||(this.treeCache[a]=this.esprima.parse(b,{range:!0}))}catch(d){throw d.message='Esprima parser error in "'+a+'"\n '+d.message,d}var e=[];return this.traverse(c,function(a){"ImportDeclaration"==a.type?e.push(a.source.value):"ExportDeclaration"==a.type&&a.source&&e.push(a.source.value)}),e},addPolyfill:function(a){this.loadEsprima(null,null,function(){},function(){}),this.polyfills.push(a)},polyfills:[],applyPolyfill:function(a,b){for(var c=0;c<this.polyfills.length;c++)this.polyfills[c](a,b)},parseEval:function(a,b,c){if(!this.polyfills.length&&!this.checkModuleSyntax(c.name,a))return b.global.__Loader=b,scopedEval((b._strict?'"use strict";\n':"")+a,b.global,c.sourceURL),delete b.global.__Loader,void 0;var d=this.treeCache[c.name]||this.esprima.parse(a,{range:!0}),e=c.normalizeMap||{},f=new k(a),g=this;this.traverse(d,function(a){if("ImportDeclaration"==a.type){var b=e[a.source.value]||a.source.value;if("default"==a.kind)f.replace(a.range[0],a.range[1],"var "+a.specifiers[0].id.name+" = __Loader.get('"+b+"')['default'];");else{for(var c="var __module = __Loader.get('"+b+"');",d=0;d<a.specifiers.length;d++){var h=a.specifiers[d];c+="var "+(h.name?h.name.name:h.id.name)+" = __module['"+h.id.name+"'];"}f.replace(a.range[0],a.range[1],c)}}else if("ExportDeclaration"==a.type)if(a.declaration){var i,j=a.declaration.range[0]-1;if("VariableDeclaration"==a.declaration.type){var k=a.declaration.declarations[0];k.init&&(i=k.id.name,j=k.init.range[0]-1)}else("FunctionDeclaration"==a.declaration.type||"ClassDeclaration"==a.declaration.type)&&(i=a.declaration.id.name);a.default&&(i="default"),f.replace(a.range[0],j,"__exports['"+i+"'] = ")}else if(a.source){var b=e[a.source.value]||a.source.value;if("ExportBatchSpecifier"==a.specifiers[0].type)f.replace(a.range[0],a.range[1],"var __module = __Loader.get('"+b+"'); for (var m in __module) { __exports[m] = __module[m]; }; ");else{for(var c="var __module = __Loader.get('"+b+"'); ",d=0;d<a.specifiers.length;d++){var h=a.specifiers[d];c+="__exports['"+(h.name?h.name.name:h.id.name)+"'] = __module['"+h.id.name+"']; "}f.replace(a.range[0],a.range[1],c)}}else{for(var c="",d=0;d<a.specifiers.length;d++){var h=a.specifiers[d];c+="__exports['"+h.id.name+"'] = "+(h.name?h.name.name:h.id.name)+"; "}f.replace(a.range[0],a.range[1],c)}else"ModuleDeclaration"==a.type&&"BlockStatement"==a.body.type?(f.replace(a.range[0],a.body.range[0]+1,"(function() { var __exports = {}; "),f.replace(a.body.range[1],a.range[1]," __Loader.set('"+a.id.name+"', new Module(__exports)); })();")):g.polyfills.length&&g.applyPolyfill(a,f)}),delete this.treeCache[c.name],b.global.__Loader=b;var h=b.global.__exports={};if(scopedEval((b._strict?'"use strict";\n':"")+f.toString(),b.global,c.sourceURL),delete b.global.__Loader,delete b.global.__exports,c.isEval)for(var i in h)throw"Exports only supported for modules, not script evaluation.";return h}},k=function(a){this.source=a,this.rangeOps=[]};k.prototype={mapIndex:function(a){for(var b=0;b<this.rangeOps.length;b++){var c=this.rangeOps[b];if(!(c.start>=a)){if(!(c.end<=a))throw"Source location "+a+" has already been transformed!";a+=c.diff}}return a},replace:function(a,b,c){var d=c.length-(b-a+1);a=this.mapIndex(a),b=this.mapIndex(b),this.source=this.source.substr(0,a)+c+this.source.substr(b+1),this.rangeOps.push({start:a,end:b,diff:d})},getRange:function(a,b){return this.source.substr(this.mapIndex(a),this.mapIndex(b))},toString:function(){return this.source}},global.Loader=a,global.Module=b,global.System=f}();var scopedEval=function(source,global,sourceURL){eval("(function(window) { with(global) { "+source+" } }).call(global, global);"+(sourceURL?"\n//# sourceURL="+sourceURL:""))}}(window);